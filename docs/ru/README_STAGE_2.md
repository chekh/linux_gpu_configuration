# Скрипты настройки этапа 2

Этот каталог содержит скрипты для установки, управления и удаления драйверов GPU и связанных пакетов на вашей Linux-машине, включая драйверы NVIDIA, CUDA, cuDNN и Python.

## Оглавление

- [Обзор](#обзор)
- [Установка](#установка)
- [Удаление](#удаление)
- [Управление сервисами](#управление-сервисами)
- [Проверка состояния сервисов](#проверка-состояния-сервисов)
- [Конфигурация](#конфигурация)

## Обзор

Эти скрипты позволяют установить, настроить, управлять и удалить компоненты, связанные с GPU, в рамках `stage_2`:

- **Драйверы NVIDIA:** Установка указанной версии драйвера NVIDIA.
- **CUDA:** Установка указанной версии инструментария CUDA.
- **cuDNN:** Установка библиотеки cuDNN для задач глубокого обучения.
- **Python:** Установка и настройка указанной версии Python на уровне всей системы, с установкой в качестве версии по умолчанию.

## Установка

### 1. Настройте окружение

Перед запуском скриптов убедитесь, что файл `config.env` настроен правильно. Например:

```ini
# Включить/Отключить установку драйверов NVIDIA
NVIDIA_DRIVER_ENABLE=true
NVIDIA_DRIVER_VERSION=525

# Включить/Отключить установку CUDA
CUDA_ENABLE=true
CUDA_VERSION=12-6
CUDA_DISTRIBUTION=ubuntu2404
CUDA_ARCH=x86_64

# Включить/Отключить установку cuDNN
CUDNN_ENABLE=true

# Конфигурация Python
PYTHON_ENABLE=true
PYTHON_VERSION=3.11.9
```

### 2. Запустите установочные скрипты

Каждый компонент имеет свой скрипт для установки. Вы можете запускать отдельные скрипты или использовать скрипт `run_stage.sh` для последовательного выполнения всех установок.

#### a. Установка Python

Чтобы установить указанную версию Python на уровне всей системы и сделать её версией по умолчанию, выполните:

```bash
./install_python.sh
```

#### b. Установка драйверов NVIDIA, CUDA и cuDNN

Если вам необходимо установить эти компоненты, выполните:

```bash
./install_stage_2.sh
```

Этот скрипт установит драйверы NVIDIA, инструментарий CUDA и библиотеку cuDNN на основе настроек в файле `config.env`.

### 3. Проверьте состояние сервисов

После установки вы можете проверить состояние сервисов, выполнив команду:

```bash
./check_service_status.sh
```

Этот скрипт также проверит установленную версию Python.

## Удаление

Чтобы удалить компоненты, связанные с GPU, и Python, установленные на этапе `stage_2`, выполните:

```bash
./uninstall_stage_2.sh
```

Этот скрипт безопасно удалит компоненты и их конфигурации.

## Управление сервисами

При необходимости вы можете управлять связанными сервисами (например, демоном постоянства NVIDIA) с помощью скрипта `manage_services_stage_2.sh`.

Для управления сервисами выполните:

```bash
./manage_services_stage_2.sh
```

## Проверка состояния сервисов

Чтобы проверить состояние всех ключевых сервисов и убедиться в правильности установленной версии Python, выполните:

```bash
./check_service_status.sh
```

## Конфигурация

Поведение скриптов контролируется файлом `config.env`. Измените этот файл, чтобы настроить, какие компоненты будут включены или отключены.

### Пример конфигурации

```ini
# Включить/Отключить установку драйверов NVIDIA
NVIDIA_DRIVER_ENABLE=true
NVIDIA_DRIVER_VERSION=525

# Включить/Отключить установку CUDA
CUDA_ENABLE=true
CUDA_VERSION=12-6
CUDA_DISTRIBUTION=ubuntu2404
CUDA_ARCH=x86_64

# Включить/Отключить установку cuDNN
CUDNN_ENABLE=true

# Конфигурация Python
PYTHON_ENABLE=true
PYTHON_VERSION=3.11.9
```

Убедитесь, что файл настроен правильно перед выполнением установочных или управляющих скриптов.

## Заключение

Эти скрипты предоставляют комплексное решение для управления компонентами, связанными с GPU, и Python на этапе `stage_2` вашей Linux-системы. Настройте файл `config.env` в соответствии с вашими требованиями перед выполнением скриптов.